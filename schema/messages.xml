<?xml version="1.0" encoding="utf-8"?>
<sbe:messageSchema xmlns:sbe="http://fixprotocol.io/2016/sbe"
                   package="com.liversedge.messages"
                   id="1"
                   version="1"
                   semanticVersion="1.0"
                   description="Strategy - Execution/MD Messages"
                   byteOrder="littleEndian">

    <types>
        <!-- Basic types -->
        <composite name="messageHeader" description="Message identifiers and length of message root">
            <type name="blockLength" primitiveType="uint16"/>
            <type name="templateId" primitiveType="uint16"/>
            <type name="schemaId" primitiveType="uint16"/>
            <type name="version" primitiveType="uint16"/>
        </composite>

        <composite name="GroupSizeEncoding" description="Repeating group dimensions">
            <type name="blockLength" primitiveType="uint16"/>
            <type name="numInGroup" primitiveType="uint16"/>
        </composite>

        <composite name="VarAsciiEncoding" description="Variable length ASCII string">
            <type name="length" primitiveType="uint16" maxValue="65534"/>
            <type name="varData" primitiveType="uint8" length="0" characterEncoding="US-ASCII"/>
        </composite>

        <composite name="VarStringEncoding" description="Variable length UTF-8 String.">
            <type name="length" primitiveType="uint32" maxValue="1073741824"/>
            <type name="varData" primitiveType="uint8" length="0" characterEncoding="UTF-8"/>
        </composite>

        <composite name="VarDataEncoding" description="Variable length binary blob.">
            <type name="length" primitiveType="uint32" maxValue="1073741824"/>
            <type name="varData" primitiveType="uint8" length="0"/>
        </composite>

        <composite name="Date" description="Date represented as YYYYMMDD.">
            <type name="year" primitiveType="uint16"/>
            <type name="month" primitiveType="uint8"/>
            <type name="day" primitiveType="uint8"/>
        </composite>

        <composite name="Qty">
            <type name="mantissa" primitiveType="int64" description="Mantissa of Decimal number"/>
            <type name="exponent" primitiveType="int8" presence="constant" description="Exponent of Decimal number">-4</type>
        </composite>

        <composite name="Price">
            <type name="mantissa" primitiveType="int64" description="Mantissa of Decimal number"/>
            <type name="exponent" primitiveType="int8" presence="constant" description="Exponent of Decimal number">-8</type>
        </composite>

        <enum name="SettlType" encodingType="uint8">
            <validValue name="REGULAR" description="regular">0</validValue>
            <validValue name="W1" description="week">1</validValue>
            <validValue name="M1" description="monthly">2</validValue>
            <validValue name="M3" description="3 monthly">3</validValue>
        </enum>

        <enum name="SecurityType" encodingType="uint8">
            <validValue name="FUT" description="future">0</validValue>
            <validValue name="FUTCO" description="future combination">1</validValue>
        </enum>

        <enum name="ActionEnum" encodingType="uint8">
            <validValue name="ADD" description="Adds or updates a security">0</validValue>
            <validValue name="REMOVE" description="Remove the security.">1</validValue>
        </enum>

        <enum name="ConnectionStatusEnum" encodingType="uint8">
            <validValue name="STARTING" description="Ready for trading.">0</validValue>
            <validValue name="ONLINE" description="Ready for trading.">1</validValue>
            <validValue name="OFFLINE" description="Disconnected.">2</validValue>
        </enum>

        <enum name="SecurityStatusEnum" encodingType="uint8">
            <validValue name="PENDING_SNAPSHOT" description="Symbol is pending initial snapshot.">0</validValue>
            <validValue name="ONLINE" description="Connected and streaming.">1</validValue>
            <validValue name="OFFLINE" description="Disconnected and not streaming.">2</validValue>
        </enum>

        <enum name="Currency" encodingType="uint8">
            <validValue name="USD" description="us dollar">0</validValue>
            <validValue name="BTC" description="bitcoin">1</validValue>
            <validValue name="ETH" description="ethereum">2</validValue>
        </enum>

        <enum name="MDUpdateType" encodingType="uint8">
            <validValue name="BOOK_UPDATE" description="Order book level update">0</validValue>
            <validValue name="TRADE" description="Trade execution">1</validValue>
        </enum>

        <enum name="MDSide" encodingType="uint8">
            <validValue name="BID" description="Bid side">0</validValue>
            <validValue name="ASK" description="Ask side">1</validValue>
        </enum>

        <enum name="MDUpdateAction" encodingType="uint8">
            <validValue name="NEW" description="New level">0</validValue>
            <validValue name="CHANGE" description="Update existing level">1</validValue>
            <validValue name="DELETE" description="Remove level">2</validValue>
        </enum>

        <enum name="Side" encodingType="uint8">
            <validValue name="BUY" description="Buy side">0</validValue>
            <validValue name="SELL" description="Sell side">1</validValue>
        </enum>

        <enum name="OrderType" encodingType="uint8">
            <validValue name="MARKET" description="Market order">0</validValue>
            <validValue name="LIMIT" description="Limit order">1</validValue>
            <validValue name="STOP" description="Stop order">2</validValue>
            <validValue name="STOP_LIMIT" description="Stop limit order">3</validValue>
        </enum>

        <enum name="TimeInForce" encodingType="uint8">
            <validValue name="IOC" description="Immediate or cancel">0</validValue>
            <validValue name="FOK" description="Fill or kill">1</validValue>
            <validValue name="GTC" description="Good till cancel">2</validValue>
            <validValue name="DAY" description="Good for day">3</validValue>
        </enum>

        <enum name="RejectReason" encodingType="uint8">
            <validValue name="ORDER_NOT_FOUND" description="Order not found (already filled/cancelled)">0</validValue>
        </enum>

        <enum name="OrdStatus" encodingType="uint8">
            <validValue name="NEW" description="Order accepted">0</validValue>
            <validValue name="PARTIALLY_FILLED" description="Order partially filled">1</validValue>
            <validValue name="FILLED" description="Order completely filled">2</validValue>
            <validValue name="CANCELLED" description="Order cancelled">3</validValue>
            <validValue name="REJECTED" description="Order rejected">4</validValue>
        </enum>

        <enum name="OrdRejReason" encodingType="uint8">
            <validValue name="NO_REJECT" description="No reject (request accepted)">0</validValue>
            <validValue name="UNKNOWN_SYMBOL" description="Unknown symbol">1</validValue>
            <validValue name="EXCHANGE_CLOSED" description="Exchange closed">2</validValue>
            <validValue name="ORDER_EXCEEDS_LIMIT" description="Order exceeds limit">3</validValue>
            <validValue name="TOO_LATE_TO_ENTER" description="Too late to enter">4</validValue>
            <validValue name="UNKNOWN_ORDER" description="Unknown order">5</validValue>
            <validValue name="DUPLICATE_ORDER" description="Duplicate Order (e.g. dupe ClOrdID)">6</validValue>
            <validValue name="DUPLICATE_VERBAL_ORDER" description="Duplicate of a verbally communicated order">7</validValue>
            <validValue name="STALE_ORDER" description="Stale order">8</validValue>
            <validValue name="TRADE_ALONG_REQUIRED" description="Trade along required">9</validValue>
            <validValue name="INVALID_INVESTOR_ID" description="Invalid Investor ID">10</validValue>
            <validValue name="UNSUPPORTED_ORDER_CHARACTERISTIC" description="Unsupported order characteristic">11</validValue>
            <validValue name="SURVEILLANCE_OPTION" description="Surveillance Option">12</validValue>
            <validValue name="INCORRECT_QUANTITY" description="Incorrect quantity">13</validValue>
            <validValue name="INCORRECT_ALLOCATED_QUANTITY" description="Incorrect allocated quantity">14</validValue>
            <validValue name="UNKNOWN_ACCOUNT" description="Unknown account(s)">15</validValue>
            <validValue name="PRICE_EXCEEDS_PRICE_BAND" description="Price exceeds current price band">16</validValue>
            <validValue name="INVALID_PRICE_INCREMENT" description="Invalid price increment">18</validValue>
            <validValue name="OTHER" description="Other">99</validValue>
        </enum>
    </types>

    <sbe:message name="ConnectionStatus" id="100" description="Security Definition Message">
        <field name="timestamp" id="1" type="uint64" description="Timestamp in nanoseconds."/>
        <field name="status" id="2" type="ConnectionStatusEnum" description="Current connection Status."/>
    </sbe:message>

    <sbe:message name="SecurityDefinition" id="101" description="Security Definition Message">
        <field name="id" id="1" type="int32" description="Internal security identifier."/>
        <field name="currency" id="3" type="Currency" description="Currency used for pricing"/>
        <field name="commCurrency" id="4" type="Currency" description="Currency used for commission"/>
        <field name="settlCurrency" id="5" type="Currency" description="Currency of settlement denomination."/>
        <field name="settlType" id="6" type="SettlType" description="Settlement period."/>
        <field name="maturityDate" id="7" type="Date" description="Date of maturity."/>
        <field name="minPriceIncrement" id="8" type="Price" description="Minimum price increment."/>
        <field name="instrumentPricePrecision" id="9" type="int8"
               description="Number of Decimal places for instrument prices."/>
        <field name="minSizeIncrement" id="10" type="Qty" description="Minimum size increment."/>
        <field name="contractMultiplier" id="11" type="Price"
               description="Number of USD the contract represents."/>
        <field name="securityType" id="12" type="SecurityType"
               description="Type of instrument i.e spread or outright."/>
        <field name="timestamp" id="13" type="uint64" description="Timestamp in nanoseconds."/>
        <field name="action" id="14" type="ActionEnum" description="Whether this security is being added or removed"/>
        <field name="symbol" id="2" type="VarStringEncoding" description="Security symbol."/>
    </sbe:message>

    <sbe:message name="SecurityStatus" id="102" description="Security Definition Message">
        <field name="timestamp" id="1" type="uint64" description="Timestamp in nanoseconds."/>
        <field name="status" id="2" type="SecurityStatusEnum" description="Current symbol Status."/>
        <field name="securityId" id="4" type="int32" description="Internal security identifier."/>
    </sbe:message>

    <sbe:message name="MDUpdate" id="103" description="Market Data Incremental Update">
        <field name="securityId" id="1" type="int32" description="Internal security identifier."/>
        <field name="timestamp" id="2" type="uint64" description="Timestamp in nanoseconds."/>
        <field name="updateType" id="3" type="MDUpdateType" description="Type of market data update."/>
        <field name="side" id="4" type="MDSide" description="Side of the market."/>
        <field name="price" id="5" type="Price" description="Price level."/>
        <field name="qty" id="6" type="Qty" description="Quantity at price level."/>
        <field name="action" id="7" type="MDUpdateAction" presence="optional" description="Action for book updates (ignored for trades)."/>
        <field name="tradeId" id="8" type="uint64" presence="optional" description="Trade identifier (only for trade updates)."/>
    </sbe:message>

    <sbe:message name="MDFullBook" id="104" description="Market Data Full Book Snapshot">
        <field name="securityId" id="1" type="int32" description="Internal security identifier."/>
        <field name="timestamp" id="2" type="uint64" description="Timestamp in nanoseconds."/>
        <group name="bidLevels" id="3" dimensionType="GroupSizeEncoding" description="Bid levels">
            <field name="price" id="1" type="Price" description="Bid price."/>
            <field name="qty" id="2" type="Qty" description="Bid quantity."/>
        </group>
        <group name="askLevels" id="4" dimensionType="GroupSizeEncoding" description="Ask levels">
            <field name="price" id="1" type="Price" description="Ask price."/>
            <field name="qty" id="2" type="Qty" description="Ask quantity."/>
        </group>
    </sbe:message>

    <sbe:message name="NewOrder" id="105" description="New Order Request">
        <field name="timestamp" id="1" type="uint64" description="Timestamp in nanoseconds."/>
        <field name="securityId" id="2" type="int32" description="Internal security identifier."/>
        <field name="side" id="3" type="Side" description="Order side (buy/sell)."/>
        <field name="orderType" id="4" type="OrderType" description="Order type."/>
        <field name="timeInForce" id="5" type="TimeInForce" description="Time in force."/>
        <field name="price" id="6" type="Price" description="Order price."/>
        <field name="quantity" id="7" type="Qty" description="Order quantity."/>
        <field name="isPostOnly" id="8" type="uint8" description="Post-only flag (0=false, 1=true)."/>
        <field name="clientOrderId" id="9" type="VarStringEncoding" description="Client-assigned order identifier."/>
    </sbe:message>

    <sbe:message name="CancelOrder" id="106" description="Cancel Order Request">
        <field name="timestamp" id="1" type="uint64" description="Timestamp in nanoseconds."/>
        <field name="securityId" id="2" type="int32" description="Internal security identifier."/>
        <field name="clientOrderId" id="3" type="VarStringEncoding" description="Client-assigned order identifier for this cancel request."/>
        <field name="origClientOrderId" id="4" type="VarStringEncoding" description="Original client order identifier to cancel."/>
    </sbe:message>

    <sbe:message name="OrderCancelReject" id="107" description="Order Cancel Reject Response">
        <field name="timestamp" id="1" type="uint64" description="Timestamp in nanoseconds."/>
        <field name="securityId" id="2" type="int32" description="Internal security identifier."/>
        <field name="clientOrderId" id="3" type="VarStringEncoding" description="Client order identifier from cancel request."/>
        <field name="origClientOrderId" id="4" type="VarStringEncoding" description="Original client order identifier that failed to cancel."/>
    </sbe:message>

    <sbe:message name="ExecutionReport" id="108" description="Execution Report">
        <field name="timestamp" id="1" type="uint64" description="Timestamp in nanoseconds."/>
        <field name="securityId" id="2" type="int32" description="Internal security identifier."/>
        <field name="origClientOrderId" id="3" type="VarStringEncoding" description="Original client order identifier."/>
        <field name="clientOrderId" id="4" type="VarStringEncoding" description="Client order identifier assigned by Deribit."/>
        <field name="ordStatus" id="5" type="OrdStatus" description="Order status."/>
        <field name="side" id="6" type="Side" description="Order side (buy/sell)."/>
        <field name="transactTime" id="7" type="uint64" description="Transaction time in nanoseconds."/>
        <field name="leavesQty" id="8" type="Qty" description="Quantity remaining to be filled."/>
        <field name="cumQty" id="9" type="Qty" description="Cumulative quantity filled."/>
        <field name="orderQty" id="10" type="Qty" description="Total order quantity."/>
        <field name="price" id="11" type="Price" description="Order price."/>
        <field name="ordRejReason" id="12" type="OrdRejReason" description="Order rejection reason."/>
        <field name="lastPx" id="13" type="Price" presence="optional" description="Last fill price."/>
        <field name="lastQty" id="14" type="Qty" presence="optional" description="Last fill quantity."/>
        <field name="text" id="15" type="VarStringEncoding" description="Free format text."/>
    </sbe:message>

</sbe:messageSchema>